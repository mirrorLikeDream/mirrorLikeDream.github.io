import{d as N,n as L,t as A,C as X,D as Z,e as M,r as _,E as q,F as ee,h as D,G as te,l as U,H as oe,J as ne,a as r,K as j,L as se,M as ae,f as F,O as le,x as re,j as ie,T as de,P as ce,Q as ue,R as pe,S as ve,s as me,I as fe,v as Y,c as x,y as c,U as H,u as we,N as he,w as _e,V as W,W as B,o as b,b as K,X as P,Y as ye,_ as Ce}from"./index-PjOYImKJ.js";import{u as ge,C as ke}from"./index-BoulPdOq.js";import{P as xe}from"./index-CrFuTle1.js";import"./use-lazy-render-apxFokIB.js";import"./use-scope-id-CQTTiy5Q.js";const[G,I]=M("dropdown-menu"),be={overlay:A,zIndex:L,duration:Z(.2),direction:X("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:A,closeOnClickOverlay:A,swipeThreshold:L},J=Symbol(G);var Pe=N({name:G,props:be,setup(t,{slots:p}){const u=ge(),m=_(),n=_(),v=_(0),{children:l,linkChildren:y}=q(J),s=ee(m),f=D(()=>l.some(e=>e.state.showWrapper)),h=D(()=>t.swipeThreshold&&l.length>+t.swipeThreshold),C=D(()=>{if(f.value&&te(t.zIndex))return{zIndex:+t.zIndex+1}}),o=()=>{l.forEach(e=>{e.toggle(!1)})},$=()=>{t.closeOnClickOutside&&o()},O=()=>{if(n.value){const e=j(n);t.direction==="down"?v.value=e.bottom:v.value=se.value-e.top}},E=()=>{f.value&&O()},R=e=>{l.forEach((a,i)=>{i===e?a.toggle():a.state.showPopup&&a.toggle(!1,{immediate:!0})})},S=(e,a)=>{const{showPopup:i}=e.state,{disabled:d,titleClass:g}=e;return r("div",{id:`${u}-${a}`,role:"button",tabindex:d?void 0:0,"data-allow-mismatch":"attribute",class:[I("item",{disabled:d,grow:h.value}),{[ae]:!d}],onClick:()=>{d||R(a)}},[r("span",{class:[I("title",{down:i===(t.direction==="down"),active:i}),g],style:{color:i?t.activeColor:""}},[r("div",{class:"van-ellipsis"},[e.renderTitle()])])])};return U({close:o}),y({id:u,props:t,offset:v,updateOffset:O}),oe(m,$),ne("scroll",E,{target:s,passive:!0}),()=>{var e;return r("div",{ref:m,class:I()},[r("div",{ref:n,style:C.value,class:I("bar",{opened:f.value,scrollable:h.value})},[l.map(S)]),(e=p.default)==null?void 0:e.call(p)])}}});const[Oe,V]=M("dropdown-item"),Se={title:String,options:le(),disabled:Boolean,teleport:[String,Object],lazyRender:A,modelValue:F,titleClass:F};var Ie=N({name:Oe,inheritAttrs:!1,props:Se,emits:["open","opened","close","closed","change","update:modelValue"],setup(t,{emit:p,slots:u,attrs:m}){const n=re({showPopup:!1,transition:!0,showWrapper:!1}),v=_(),{parent:l,index:y}=ie(J);if(!l)return;const s=e=>()=>p(e),f=s("open"),h=s("close"),C=s("opened"),o=()=>{n.showWrapper=!1,p("closed")},$=e=>{t.teleport&&e.stopPropagation()},O=(e=!n.showPopup,a={})=>{e!==n.showPopup&&(n.showPopup=e,n.transition=!a.immediate,e&&(l.updateOffset(),n.showWrapper=!0))},E=()=>{if(u.title)return u.title();if(t.title)return t.title;const e=t.options.find(a=>a.value===t.modelValue);return e?e.text:""},R=e=>{const{activeColor:a}=l.props,{disabled:i}=e,d=e.value===t.modelValue,g=()=>{i||(n.showPopup=!1,e.value!==t.modelValue&&(p("update:modelValue",e.value),p("change",e.value)))},k=()=>{if(d)return r(fe,{class:V("icon"),color:i?void 0:a,name:"success"},null)};return r(ke,{role:"menuitem",key:String(e.value),icon:e.icon,title:e.text,class:V("option",{active:d,disabled:i}),style:{color:d?a:""},tabindex:d?0:-1,clickable:!i,onClick:g},{value:k})},S=()=>{const{offset:e}=l,{autoLocate:a,zIndex:i,overlay:d,duration:g,direction:k,closeOnClickOverlay:Q}=l.props,T=ce(i);let z=e.value;if(a&&v.value){const w=ue(v.value);w&&(z-=j(w).top)}return k==="down"?T.top=`${z}px`:T.bottom=`${z}px`,pe(r("div",me({ref:v,style:T,class:V([k]),onClick:$},m),[r(xe,{show:n.showPopup,"onUpdate:show":w=>n.showPopup=w,role:"menu",class:V("content"),overlay:d,position:k==="down"?"top":"bottom",duration:n.transition?g:0,lazyRender:t.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${l.id}-${y.value}`,"data-allow-mismatch":"attribute",closeOnClickOverlay:Q,onOpen:f,onClose:h,onOpened:C,onClosed:o},{default:()=>{var w;return[t.options.map(R),(w=u.default)==null?void 0:w.call(u)]}})]),[[ve,n.showWrapper]])};return U({state:n,toggle:O,renderTitle:E}),()=>t.teleport?r(de,{to:t.teleport},{default:()=>[S()]}):S()}});const Ve=Y(Ie),Ae=Y(Pe),$e={class:"schedule"},Ee={class:"week-selector"},Re={class:"timetable"},Te={class:"time-column"},ze={class:"course-grid"},De={class:"weekday-row"},We={class:"course-container"},Be={class:"course-name"},Ne={class:"course-location"},Le=N({__name:"ScheduleView",setup(t){const p=we(),u=_(1),m=Array.from({length:20},(y,s)=>({text:`第${s+1}周`,value:s+1})),n=[{index:1,start:"8:00",end:"8:45"},{index:2,start:"8:55",end:"9:40"},{index:3,start:"10:00",end:"10:45"},{index:4,start:"10:55",end:"11:40"},{index:5,start:"14:00",end:"14:45"},{index:6,start:"14:55",end:"15:40"},{index:7,start:"16:00",end:"16:45"},{index:8,start:"16:55",end:"17:40"},{index:9,start:"19:00",end:"19:45"},{index:10,start:"19:55",end:"20:40"}],v=["周一","周二","周三","周四","周五","周六","周日"],l=_([{id:1,name:"高等数学",location:"A301",day:1,start:1,end:2},{id:2,name:"高等数学",location:"A401",day:1,start:5,end:2},{id:3,name:"毛概",location:"A401",day:2,start:2,end:1},{id:4,name:"计算机应用基础",location:"A403",day:3,start:3,end:2}]);return(y,s)=>{const f=he,h=Ve,C=Ae;return b(),x("div",$e,[r(f,{title:"课表","left-arrow":"",onClickLeft:s[0]||(s[0]=o=>H(p).back())}),c("div",Ee,[r(C,null,{default:_e(()=>[r(h,{modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=o=>u.value=o),options:H(m)},null,8,["modelValue","options"])]),_:1})]),c("div",Re,[c("div",Te,[(b(),x(W,null,B(n,o=>c("div",{class:"time-cell",key:o.index},[K(P(o.start),1),s[2]||(s[2]=c("br",null,null,-1)),K(P(o.end),1)])),64))]),c("div",ze,[c("div",De,[(b(),x(W,null,B(v,o=>c("div",{class:"weekday-cell",key:o},P(o),1)),64))]),c("div",We,[(b(!0),x(W,null,B(l.value,o=>(b(),x("div",{class:"course-card",key:o.id,style:ye({gridRow:o.start+" / "+(o.end+1),gridColumn:o.day+" / "+(o.day+1)})},[c("p",Be,P(o.name),1),c("p",Ne,P(o.location),1)],4))),128))])])])])}}}),je=Ce(Le,[["__scopeId","data-v-cd6113ec"]]);export{je as default};
